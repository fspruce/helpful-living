{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
<main class="container" role="main" aria-label="Service booking form">
  <h1 class="visually-hidden">Book a Service</h1>
  <section class="col-12 accounts-container" aria-labelledby="booking-heading">
      <h2 id="booking-heading">Book Your Initial Call</h2>
      <div class="booking-info" role="region" aria-label="Booking instructions">
        <p>
          Before we can confirm you as a client, we will first need to have a short initial needs call.<br>
          Please let us know a date and time range that suits you, and we will confirm a time for you on the chosen date.<br>
          <strong class="note" aria-label="Important note">Note:</strong> Please be aware that if there are no time slot available within your chosen range, we may have
          to discuss further a separate time that works for everyone. A longer time range will allow for more options.
        </p>
      </div>
  <form class="bookings-container row" 
        method="post"
        action="{% url 'book_service' %}"
        aria-label="Initial consultation booking form">
    {% csrf_token %}
    {{ form|crispy }}
    
      <div class="service-selection d-none" role="group" aria-labelledby="service-label">
        <label id="service-label" for="services">Choose a service to discuss:</label>
        <select name="services" 
                id="services" 
                class="form-control"
                aria-describedby="service-help"
                aria-required="true"
                required>
          <option value="" disabled {% if not selected_service %}selected{% endif %}>
            Choose a service...
          </option>
          {% for service in service_list %}
          <option value="{{ service.id }}" 
                  {% if selected_service and selected_service.id == service.id %}selected{% endif %}
                  aria-label="Select {{ service.service_name }} service for discussion">
            {{ service.service_name }}
          </option>
          {% endfor %}
        </select>
        <small id="service-help" class="form-text text-muted visually-hidden">
          Select the service you would like to discuss during your initial consultation call.
        </small>
      </div>
    </section>
  </form>
</main>
<script src="{% static 'js/bookings.js' %}"></script>
{% endblock %}